<!DOCTYPE html>
<html lang="en">

<head>

  <!-- basic responsive attributes -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Geolocation app built with NestJS and Prisma">
  <meta name="author" content="Denise Case">
  <meta name="theme-color" content="#FFFFFF" />

  <title>
    <%= (typeof title==="undefined" ? "Findit!" : title) %>
  </title>

  <!--
    Get current MD5 CSS:
    
    https://mdbootstrap.com/docs/standard/getting-started/installation/            
    Material Design for Bootstrap fonts and icons 
    preload above for improved performance
     -->

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.css" rel="stylesheet" />


  <!-- Custom styles at the end -->
  <link href='./styles/style.css' rel='stylesheet' />

  <!-- Insert favicon link tags from favicon.io -->
  <!-- Unzip favicon files into public/images/ -->

  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="./manifest.json">
  <link rel="canonical" href="https://findit-nest.herokuapp.com/" />


  <script>
    // If service workers are supported by user browser
    // AFter all content has loaded, register the service worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
      })
    }
  </script>


</head>

<!--wrap the whole page (header, footer, main) -->

<body class="page-container">

  <!--  Resusable header included in layout.ejs -->
  <!-- See https://mdbootstrap.com/docs/standard/navigation/navbar/ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top mb-2">
    <div class="container-fluid justify-content-start">
      <a class="navbar-brand" href="/">Findit!</a>

      <!-- Left links -->
      <ul class="navbar-nav">
        <li class="nav-item"> <a class="nav-link" href="/locations">Locations</a> </li>
        <li class="nav-item"> <a class="nav-link" href="/api">API</a> </li>
      </ul>

    </div> <!-- Container wrapper -->
  </nav><!-- Navbar -->

  <main class="container context mt-5">
    <div class="row">
      <div class="col "></div>

      <!-- core page here-->

      <br>
      <br>

      <div id="both" class="d-flex flex-column align-items-stretch">

        <!--
*  Team index view
*  (the default page for this resource)
*  
*  Uses HTML and embedded JavaScript (EJS) 
*  to dyanmically create a webpage to list all of this type of resource.
*
* @author Denise Case <dcase@nwmissouri.edu>

* based on https://www.mynotepaper.com/nodejs-simple-crud-with-expressjs-and-mysql
* repo https://github.com/mdobydullah/nodejs-crud-with-expressjs-mysql

-->

        <% if (locations.success) { %>
          <div class="alert alert-success" role="alert">
            <%- location.success %>
          </div>
          <% } %>

            <% if (locations.alert) { %>
              <div class="alert alert-danger" role="alert">
                <%- location.error %>
              </div>
              <% } %>

                <div class="card ">
                  <div class="card-header">
                    <ul class="nav nav-pills w-100">
                      <li class="nav-pill active">
                        <a class="nav-link" href="./locations">Locations</a>
                      </li>
                      <li class="nav-pill ml-auto">
                        <a class="nav-link active" href="./locations/create"><i class="fas fa-plus"></i></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- Look up how to show a list group instead of a table -->
                <!-- https://mdbootstrap.com/docs/standard/components/list-group/ -->
                <!-- At link above, scroll down to custom content -->


                <% if(locations.length) { %>

                  <div class="list-group text-center">

                    <% for(let i=0; i< locations.length; i++) { %>
                      <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                        <h5 class="mb-1">
                          <%= locations[i].id %>: <%= locations[i].name%>
                        </h5>
                        <small>
                          <%= locations[i].north %>,<%= locations[i].west %>
                              <br>
                              <%= locations[i].south %>,<%= locations[i].east %>

                        </small>
                      </a>
                      <p class="mb-1">

                        <a class="btn btn-primary details" href="../locations/details/<%=locations[i].id%>"><i
                            class="fab fa-sistrix" title="test"></i></a>
                        <a class="btn btn-success edit" href="../locations/edit/<%=locations[i].id%>"><i
                            class="fas fa-user-edit"></i></a>
                        <a class="btn btn-danger delete" href="../locations/delete/<%=locations[i].id%>"><i
                            class="fas fa-trash-alt"></i></a>
                      </p>
                      <br> <br> <br>
                      <% } %>

                  </div>
                  <% } %>

                    <!-- if result is empty -->
                    <% if(!locations.length) { %>
                      <p class="text-center">No locations found!</p>
                      <% } %>
                        <br>
      </div>
    </div>
    </div>

    </div>
    <!-- end core page here-->

    </div>
    </div>
  </main>

  <br>
  <br>

  <!--  Resusable footer included in layout.ejs -->

  <footer class="footer fixed-bottom bg-light mx-0 py-3 text-center">

    <a target="_blank" rel="noopener" href="https://findit-nest.herokuapp.com/">FindIt!</a>
    &nbsp; &#9670; &nbsp;

    <a class="btn btn-light btn-sm" href="https://github.com/denisecase/findit" target="_blank" rel="noopener"
      role="button">

      <i class="fas fa-star"></i>
      GitHub
      <i class="fab fa-github ml-1"></i></a>

  </footer>

  <!-- Console error onloading -->
  <!-- see https://developer.chrome.com/extensions/contentSecurityPolicy -->

  <!--
    Get current MD5 JS:
    
    https://mdbootstrap.com/docs/standard/getting-started/installation/            
    Material Design for Bootstrap fonts and icons 
    preload above for improved performance
     -->

  <!-- MDB -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.js"></script>

  <!-- Custom JS -->
  <!-- Add module if appropriate -->
  <script type="module" src="./scripts/main.js"></script>

</body>

</html>